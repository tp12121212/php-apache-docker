<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Cookie Consent</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <!-- Content of your site -->

    <!-- Cookie Consent Popup -->
    <div id="cookieConsent" class="alert alert-dark position-fixed bottom-0 w-100 text-center" style="display: none; z-index: 1050;">
        <p class="mb-2">
            We use cookies to enhance your experience. Please select your preferences:
        </p>
        <button id="acceptAll" class="btn btn-success btn-sm mx-1">Accept All</button>
        <button id="acceptNecessary" class="btn btn-primary btn-sm mx-1">Only Necessary</button>
        <button id="denyCookies" class="btn btn-secondary btn-sm mx-1">Deny</button>
        <p class="mt-2 small text-muted">
            <a href="/privacy-policy" target="_blank">Read our Privacy Policy</a>
        </p>
    </div>

    <!-- JavaScript to handle cookie consent -->
    <script>
        // Function to apply cookie settings based on consent type
        function applyCookieSettings(consentType) {
            if (consentType === 'acceptAll') {
                console.log("All cookies accepted");
            } else if (consentType === 'acceptNecessary') {
                console.log("Only necessary cookies enabled");
            } else if (consentType === 'deny') {
                console.log("Cookies denied");
            }
        }

        // Check if consent has been previously given
        function checkConsent() {
            const consent = localStorage.getItem('cookieConsent');
            if (!consent) {
                document.getElementById('cookieConsent').style.display = 'block';
            } else {
                applyCookieSettings(consent);
            }
        }

        // Set consent and apply corresponding settings
        function setConsent(consentType) {
            try {
                localStorage.setItem('cookieConsent', consentType);
                document.getElementById('cookieConsent').style.display = 'none';
                applyCookieSettings(consentType);
            } catch (error) {
                console.error("Error saving consent:", error);
            }
        }

        // Initialize event listeners on page load
        document.addEventListener('DOMContentLoaded', function () {
            // Check if consent is already stored
            checkConsent();

            // Add event listeners to buttons
            document.getElementById('acceptAll').addEventListener('click', function () {
                setConsent('acceptAll');
            });
            document.getElementById('acceptNecessary').addEventListener('click', function () {
                setConsent('acceptNecessary');
            });
            document.getElementById('denyCookies').addEventListener('click', function () {
                setConsent('deny');
            });
        });
    </script>

    <!-- Bootstrap JS (optional if you need Bootstrap functionality elsewhere on the page) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>